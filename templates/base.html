<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Новости{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1><a href="{{ url_for('index') }}" style="text-decoration: none; color: inherit;">Новости</a></h1>
            <p>Последние новости</p>
            <nav class="main-nav">
                <a href="{{ url_for('index') }}">Главная</a>
                {% if total_pages > 1 %}
                <span class="nav-separator">|</span>
                <a href="{{ url_for('news_page', page=2) }}">Архив</a>
                {% endif %}
            </nav>
        </header>

        <main>
            {% block content %}{% endblock %}
        </main>

        <footer>
            <p>Обновляется автоматически каждые 5 минут</p>
            <p>Всего новостей в базе: {{ total_news }}</p>
            <p class="last-update">Последнее обновление: {{ now.strftime('%H:%M:%S') if now else '' }}</p>
        </footer>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const links = document.querySelectorAll(".news-link");

            links.forEach(link => {
                const id = link.dataset.id;
                if (localStorage.getItem(id)) {
                    link.classList.add("visited");
                }

                link.addEventListener("click", () => {
                    localStorage.setItem(id, "true");
                    link.classList.add("visited");
                });
            });
        });
    </script>
</body>
</html>